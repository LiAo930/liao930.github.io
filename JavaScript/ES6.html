<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>let、const | 前端学习日志</title>
    <meta name="description" content="my study log">
    
    
    <link rel="preload" href="/assets/css/0.styles.cf9c9213.css" as="style"><link rel="preload" href="/assets/js/app.9b313d47.js" as="script"><link rel="preload" href="/assets/js/2.4bf212e8.js" as="script"><link rel="preload" href="/assets/js/11.33575be4.js" as="script"><link rel="prefetch" href="/assets/js/10.f2d103fd.js"><link rel="prefetch" href="/assets/js/12.63b2fce1.js"><link rel="prefetch" href="/assets/js/13.692ae22b.js"><link rel="prefetch" href="/assets/js/14.8d953be8.js"><link rel="prefetch" href="/assets/js/15.55a6242d.js"><link rel="prefetch" href="/assets/js/16.d58f7781.js"><link rel="prefetch" href="/assets/js/17.17fb6526.js"><link rel="prefetch" href="/assets/js/18.b97b86dc.js"><link rel="prefetch" href="/assets/js/19.cc381d1a.js"><link rel="prefetch" href="/assets/js/20.164ed89e.js"><link rel="prefetch" href="/assets/js/21.ad42f5b9.js"><link rel="prefetch" href="/assets/js/22.206e414d.js"><link rel="prefetch" href="/assets/js/23.45644994.js"><link rel="prefetch" href="/assets/js/24.c3a4f621.js"><link rel="prefetch" href="/assets/js/25.7d283e6f.js"><link rel="prefetch" href="/assets/js/26.4b4b924d.js"><link rel="prefetch" href="/assets/js/27.2ca66b1f.js"><link rel="prefetch" href="/assets/js/28.754382f8.js"><link rel="prefetch" href="/assets/js/29.1a8e6bd3.js"><link rel="prefetch" href="/assets/js/3.68d6810e.js"><link rel="prefetch" href="/assets/js/30.07790abe.js"><link rel="prefetch" href="/assets/js/31.438b6500.js"><link rel="prefetch" href="/assets/js/32.da59c1b4.js"><link rel="prefetch" href="/assets/js/33.31336004.js"><link rel="prefetch" href="/assets/js/34.8a0050e3.js"><link rel="prefetch" href="/assets/js/35.210902da.js"><link rel="prefetch" href="/assets/js/36.3cd75e09.js"><link rel="prefetch" href="/assets/js/37.10a14803.js"><link rel="prefetch" href="/assets/js/38.493eefde.js"><link rel="prefetch" href="/assets/js/39.f25d1902.js"><link rel="prefetch" href="/assets/js/4.048ff8f3.js"><link rel="prefetch" href="/assets/js/40.ce91389a.js"><link rel="prefetch" href="/assets/js/41.3b084704.js"><link rel="prefetch" href="/assets/js/42.74fd7b36.js"><link rel="prefetch" href="/assets/js/43.5151b982.js"><link rel="prefetch" href="/assets/js/44.c7b0a7f8.js"><link rel="prefetch" href="/assets/js/45.cc19d4ac.js"><link rel="prefetch" href="/assets/js/46.16d696d5.js"><link rel="prefetch" href="/assets/js/47.28572ab1.js"><link rel="prefetch" href="/assets/js/48.bf30d900.js"><link rel="prefetch" href="/assets/js/49.4e40bbea.js"><link rel="prefetch" href="/assets/js/5.8f069aa3.js"><link rel="prefetch" href="/assets/js/50.92df4fe8.js"><link rel="prefetch" href="/assets/js/51.983bf137.js"><link rel="prefetch" href="/assets/js/52.8e9176f4.js"><link rel="prefetch" href="/assets/js/53.3c147736.js"><link rel="prefetch" href="/assets/js/54.9939b16d.js"><link rel="prefetch" href="/assets/js/55.4b2b7569.js"><link rel="prefetch" href="/assets/js/56.1e051ca2.js"><link rel="prefetch" href="/assets/js/57.ee0151c9.js"><link rel="prefetch" href="/assets/js/58.b8b0f7a5.js"><link rel="prefetch" href="/assets/js/59.73e9672e.js"><link rel="prefetch" href="/assets/js/6.2e4b1887.js"><link rel="prefetch" href="/assets/js/60.6cb7f6c0.js"><link rel="prefetch" href="/assets/js/61.04c67ffc.js"><link rel="prefetch" href="/assets/js/62.513b6c7e.js"><link rel="prefetch" href="/assets/js/63.d3c0f9fc.js"><link rel="prefetch" href="/assets/js/64.80740fd6.js"><link rel="prefetch" href="/assets/js/65.1f286298.js"><link rel="prefetch" href="/assets/js/66.956bc111.js"><link rel="prefetch" href="/assets/js/67.68453c46.js"><link rel="prefetch" href="/assets/js/68.9000d41e.js"><link rel="prefetch" href="/assets/js/69.78db0538.js"><link rel="prefetch" href="/assets/js/7.70b7e5f0.js"><link rel="prefetch" href="/assets/js/70.3fd0e7c9.js"><link rel="prefetch" href="/assets/js/71.61f3112e.js"><link rel="prefetch" href="/assets/js/72.30120d65.js"><link rel="prefetch" href="/assets/js/73.642a7a88.js"><link rel="prefetch" href="/assets/js/74.bec483ce.js"><link rel="prefetch" href="/assets/js/75.f146d868.js"><link rel="prefetch" href="/assets/js/76.99529a90.js"><link rel="prefetch" href="/assets/js/8.5d8d45e8.js"><link rel="prefetch" href="/assets/js/9.453972e3.js">
    <link rel="stylesheet" href="/assets/css/0.styles.cf9c9213.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">前端学习日志</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/CSS/" class="nav-link">CSS</a></div><div class="nav-item"><a href="/JavaScript/" class="nav-link router-link-active">JavaScript</a></div><div class="nav-item"><a href="/Vue/动态组件/" class="nav-link">Vue</a></div><div class="nav-item"><a href="/webpack/webpack基础配置.html" class="nav-link">webpack</a></div><div class="nav-item"><a href="/React/" class="nav-link">React</a></div><div class="nav-item"><a href="/MongoDB/MongoDB初识.html" class="nav-link">MongoDB</a></div><div class="nav-item"><a href="/Nodejs/Nginx.html" class="nav-link">Nodejs</a></div><div class="nav-item"><a href="/Openlayer/OpenLayer.html" class="nav-link">Openlayer</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/CSS/" class="nav-link">CSS</a></div><div class="nav-item"><a href="/JavaScript/" class="nav-link router-link-active">JavaScript</a></div><div class="nav-item"><a href="/Vue/动态组件/" class="nav-link">Vue</a></div><div class="nav-item"><a href="/webpack/webpack基础配置.html" class="nav-link">webpack</a></div><div class="nav-item"><a href="/React/" class="nav-link">React</a></div><div class="nav-item"><a href="/MongoDB/MongoDB初识.html" class="nav-link">MongoDB</a></div><div class="nav-item"><a href="/Nodejs/Nginx.html" class="nav-link">Nodejs</a></div><div class="nav-item"><a href="/Openlayer/OpenLayer.html" class="nav-link">Openlayer</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>JavaScript数据类型</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaScript/JavaScript数据类型/JavaScript基础类型.html" class="sidebar-link">JavaScript基础类型</a></li><li><a href="/JavaScript/JavaScript数据类型/JavaScript引用类型.html" class="sidebar-link">JavaScript引用类型</a></li><li><a href="/JavaScript/JavaScript数据类型/遍历数组方式.html" class="sidebar-link">遍历数组方式</a></li><li><a href="/JavaScript/JavaScript数据类型/javaScript对象的property理解.html" class="sidebar-link">javaScript对象的property理解</a></li><li><a href="/JavaScript/JavaScript数据类型/Iterator（遍历器）.html" class="sidebar-link">Iterator遍历器</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>作用域和闭包</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Ajax跨域</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>每日习题</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/JavaScript/new操作符和原型链.html" class="sidebar-link">new操作符和原型链</a></li><li><a href="/JavaScript/对象创建和继承.html" class="sidebar-link">对象创建和继承</a></li><li><a href="/JavaScript/URLSearchParams.html" class="sidebar-link">查询条件封装对象URLSearchParams</a></li><li><a href="/JavaScript/BOM相关.html" class="sidebar-link">BOM相关</a></li><li><a href="/JavaScript/DOM.html" class="sidebar-link">DOM</a></li><li><a href="/JavaScript/ES6.html" class="active sidebar-link">ES6</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/JavaScript/函数中按值传递的理解.html" class="sidebar-link">函数中按值传递的理解</a></li><li><a href="/JavaScript/javaScript中的Event Loop机制.html" class="sidebar-link">javaScript中的Event Loop机制</a></li><li><a href="/JavaScript/MockJs.html" class="sidebar-link">MockJs</a></li><li><a href="/JavaScript/js使用技巧.html" class="sidebar-link">js使用技巧</a></li><li><a href="/JavaScript/拖拽API.html" class="sidebar-link">拖拽API</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h3 id="let、const"><a href="#let、const" class="header-anchor">#</a> let、const</h3> <ul><li>取代es5的全局/函数作用域，正式采用块级作用域</li> <li>使用let或const声明变量的区域即为块级作用域，依旧遵循作用域链，但更正了es5中变量泄露，变量提升，声明前使用，重复声明等问题</li> <li>let有关：暂时性死区，块级作用域，函数声明和变量声明规则相同</li> <li>const：常量声明，不可更改</li></ul> <h3 id="解构赋值"><a href="#解构赋值" class="header-anchor">#</a> 解构赋值</h3> <ul><li>数组根据位置索引，对象根据属性名称</li> <li>可以自定义默认值</li></ul> <h3 id="字符串扩展"><a href="#字符串扩展" class="header-anchor">#</a> 字符串扩展</h3> <ul><li>es6为字符串增加了iterator遍历器，因此字符串可以使用for..of遍历循环获得值</li> <li>模板字符串：`${str}`</li> <li>字符的Unicode表示法，大括号中置入数字则获得对应字符：\u{43}  =&gt;  C</li> <li>新增方法：includes、startsWith、endsWith，分别表示是否含有，是否以参数字符串开头，是否以参数字符串结尾；</li> <li>repeat(n)：返回一个新字符串，表示将原字符串重复n次；</li> <li>padStart/padEnd：补全字符串，第一个参数为数字，表示指定长度；第二个参数为字符串，表示若调用方法的字符串长度不足，则重复该字符串补足长度，如果长度超过就自动截取一段；</li> <li>trimStart/trimEnd：消除首尾空格</li></ul> <h3 id="数值扩展"><a href="#数值扩展" class="header-anchor">#</a> 数值扩展</h3> <ul><li>Number.isFinite(num)/isNaN(arg)：测试数值是否有限/是否为NaN，返回一个布尔值。前者只接受数值作为参数，后者接受任何类型的参数，对非NaN一律返回false；</li> <li>Number.parseInt/parseFloat：和es5相比并无区别，只是把方法挂载到了Number对象上，易于管理；</li> <li>Number.EPSILON：表示一个极小的常量</li> <li>Math.trunc：去除一个数的小数部分，只返回整数。会默认把参数用Number()处理一下；</li> <li>Math.sign:判断一个数的正负，正数返回1，负数返回-1，0返回0，其他值返回NaN；</li> <li>Math.cbrt：计算一个数的立方根；</li> <li>Math.hypot:返回所有参数平方和的平方根；</li> <li>ES2020引入新的数据类型BigInt，该数据类型无任何位数限制；</li></ul> <h3 id="函数扩展"><a href="#函数扩展" class="header-anchor">#</a> 函数扩展</h3> <ul><li>函数参数可直接设置默认值：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">demo1</span><span class="token punctuation">(</span>x <span class="token operator">=</span> <span class="token string">'hello'</span><span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token string">'world'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x <span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">demo1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// hello world</span>
<span class="token function">demo1</span><span class="token punctuation">(</span><span class="token string">'greeting'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// greeting world</span>
</code></pre></div><ul><li>解构赋值搭配默认值使用：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 正常解构赋值</span>
<span class="token keyword">let</span> <span class="token punctuation">{</span>x<span class="token operator">:</span>a<span class="token punctuation">,</span>y<span class="token operator">:</span>b<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span>x<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>y<span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// 1 2</span>

<span class="token comment">//此处必须用等号，用冒号会出现解构无效的错误</span>
<span class="token keyword">function</span> <span class="token function">demo2</span><span class="token punctuation">(</span><span class="token punctuation">{</span>x<span class="token operator">=</span><span class="token string">'hello'</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token string">'world'</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x <span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">demo2</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// hello world</span>
<span class="token function">demo2</span><span class="token punctuation">(</span><span class="token punctuation">{</span>x<span class="token operator">:</span><span class="token string">'greeting'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// greeting world</span>
<span class="token function">demo2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	
<span class="token comment">// 报错，无法获取undefined的x属性，因此可以在定义的时候写成function demo2({x='hello', y='world'} = {})的形式，这样就不会有问题</span>
</code></pre></div><ul><li>设置了默认值的参数应当置于参数尾部：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">demo2</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>z<span class="token operator">=</span><span class="token number">1</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    。。。
<span class="token punctuation">}</span>
</code></pre></div><ul><li>当函数中给参数设置了默认值，函数声明时形参处就会形成一个单独作用域。（例子只限es5，es6的let声明变量不可能有这种情况）</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y <span class="token operator">=</span> x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">f</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// 2</span>

<span class="token keyword">var</span> z <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token comment">// 此处形参作用域内无z，于是调用全局z变量，因此y为1</span>
<span class="token keyword">function</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token parameter">y <span class="token operator">=</span> z</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> z <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 1</span>
</code></pre></div><ul><li>rest参数</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">demo3</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b<span class="token punctuation">,</span><span class="token operator">...</span>rest</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>rest<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">demo3</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// 1 2 [ 3, 4, 5, 6, 7 ]</span>
</code></pre></div><p>rest参数类似于arguments参数，代表一组参数，返回的也是一个数组，因此不论表达还是使用上都要比arguments方便得多。<strong>但要注意rest只能置于形参尾部，否则会报错</strong></p> <ul><li>箭头函数</li></ul> <p>（1）函数体内的<code>this</code>对象，就是定义时所在的对象，而不是使用时所在的对象。箭头函数本身并没有this对象，因此this指向的就是当前箭头函数所在的作用域。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'id:'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> f <span class="token operator">=</span> <span class="token function">foo</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">{</span>id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 绑定foo函数的作用域到{id:1}</span>

<span class="token keyword">var</span> t1 <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">{</span>id<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// id: 1</span>
<span class="token keyword">var</span> t2 <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">{</span>id<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// id: 1</span>
<span class="token keyword">var</span> t3 <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">{</span>id<span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// id: 1</span>
</code></pre></div><p>（2）不可以当作构造函数，也就是说，不可以使用<code>new</code>命令，否则会抛出一个错误。</p> <p>（3）不可以使用<code>arguments</code>对象，该对象在函数体内不存在。如果要用，可以用 rest 参数代替。</p> <p>（4）不可以使用<code>yield</code>命令，因此箭头函数不能用作 Generator 函数。</p> <ul><li>尾递归，尾调用，柯里化（单一参数）</li> <li>es2017允许函数最后一个参数后加一个引号</li> <li>es2019Function.prototype.toString()返回的是函数最原本的代码（包括注释）</li> <li>es2019允许try/catch的catch语句省略参数err</li></ul> <h3 id="数组扩展"><a href="#数组扩展" class="header-anchor">#</a> 数组扩展</h3> <ul><li>扩展运算符（...[a,b,c] =&gt;a b c ）使数组变为参数序列，某种程度上替代了apply方法，还可以把具有iterator属性的类数组对象转化为真正的数组（如NodeList），也能够遍历获取generator函数执行后返回的遍历器对象（如[...go()]）</li> <li>Array.from:把类数组对象（具有length属性的对象，如下例、NodeList和arguments）和可遍历对象（iterable）转化为真正的数组（包括Map和Set）。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> obj<span class="token operator">=</span><span class="token punctuation">{</span>
	<span class="token string">'0'</span><span class="token operator">:</span><span class="token string">'liao'</span><span class="token punctuation">,</span>
	<span class="token string">'1'</span><span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">,</span>
	length<span class="token operator">:</span><span class="token number">2</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//[ 'liao', 18 ]</span>
</code></pre></div><p>Array.from方法还接受第二个参数，作用类似于map方法，可以对元素进行处理后，再放入返回的数组当中</p> <ul><li><p>Array.of：把一组参数值转化为数组，如Array .of(3,11) =&gt; [3,11]，若无参数则返回空数组</p></li> <li><p>fill：填充数组，第一个参数表示填充元素，第二第三个参数表示起始位置，左闭右开</p></li> <li><p>entries()、keys()、values()：循环遍历数组，分别遍历键值对，键名、值</p></li> <li><p>inclues()：实例方法，是否包含某个元素，返回布尔值</p></li> <li><p>flat &amp;&amp; flatMap：实例方法，扁平化（[a,b,[c,d]] ==&gt; [a,b,c,d]），默认只有一层，也可以传入参数控制扁平化的层数；</p> <p>flatMap参数为一个遍历函数，相当于map，会把原数组的项取出处理再放回，然后再解嵌套一层返回新数组</p></li> <li><p>sort排序算法在es2019已经稳定</p></li></ul> <h3 id="对象扩展"><a href="#对象扩展" class="header-anchor">#</a> 对象扩展</h3> <ul><li>属性的简洁表示</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> foo <span class="token operator">=</span> <span class="token string">'foo'</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> bar <span class="token operator">=</span> <span class="token string">'bar'</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>foo<span class="token punctuation">}</span> <span class="token comment">// 相当于{foo:'foo'}</span>
</code></pre></div><ul><li>属性名表达式</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> foo <span class="token operator">=</span> <span class="token string">'foo'</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> bar <span class="token operator">=</span> <span class="token string">'bar'</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> obj<span class="token punctuation">[</span>foo<span class="token punctuation">]</span> <span class="token operator">=</span> foo 
<span class="token comment">// 相当于obj['foo']='foo'，es6会默认把传入[]的表达式转为字符串类型，因此要注意传入对象类型时会被转换为‘object Object’（这是因为调用了object.prototype.toString方法）</span>
</code></pre></div><ul><li>方法的name属性（方法也是对象，有名方法返回函数名，匿名返回一个‘anonymous’字符串）</li> <li>对象属性的遍历和枚举</li></ul> <p>1、可枚举性：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Object.getOwnPropertyDescriptor(obj，propName) / getOwnPropertyDescriptor(obj)可以获取指定/所有属性的数据属性：</span>
<span class="token keyword">let</span> aa <span class="token operator">=</span> <span class="token punctuation">{</span>
	name<span class="token operator">:</span><span class="token string">'liao'</span><span class="token punctuation">,</span>
	_age<span class="token operator">:</span><span class="token number">18</span>
<span class="token punctuation">}</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>aa<span class="token punctuation">,</span><span class="token string">'age'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
	<span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'get is on'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_age<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token keyword">set</span><span class="token punctuation">(</span>newVal<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>_age <span class="token operator">=</span> newVal<span class="token punctuation">;</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'set is on'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> props <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptors</span><span class="token punctuation">(</span>aa<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//{</span>
<span class="token comment">//   name: {</span>
<span class="token comment">//     value: 'liao',</span>
<span class="token comment">//     writable: true,</span>
<span class="token comment">//     enumerable: true,</span>
<span class="token comment">//     configurable: true</span>
<span class="token comment">//   },</span>
<span class="token comment">//   _age: { value: 18, writable: true, enumerable: true, configurable: true },</span>
<span class="token comment">//   age: {</span>
<span class="token comment">//     get: [Function: get],</span>
<span class="token comment">//     set: [Function: set],</span>
<span class="token comment">//     enumerable: false,</span>
<span class="token comment">//     configurable: false</span>
<span class="token comment">//   }</span>
<span class="token comment">// }</span>
</code></pre></div><p>​	enumerable即代表属性是否可枚举。当有属性该值为false时，for..in、Object.keys、JSON.stringify、Object.assign将无法监测到该属性</p> <p>​	<strong>需要注意的是，for..in是会返回一个对象的继承属性的，enmuerable出现的意义就是为了规避这种问题。因此使用后三个方法只能检测到对象本身具有的属性，这一点要注意。</strong></p> <p>2、属性遍历</p> <p>当前属性遍历方法共有五种：</p> <ol><li>for..in：遍历所有可枚举的属性（包括继承属性，但不含Symbol属性）</li> <li>Object.keys(obj)：遍历所有可枚举属性（不含继承属性和Symbol属性），返回一个键名数组</li> <li>Object.getOwnPropertyNames(obj)：遍历所有属性（不含Symbol属性，但包括不可枚举属性），返回键名数组</li> <li>Object.getOwnPropertySymbols(obj)：遍历所有Symbol属性键名</li> <li>Reflect.ownKeys(obj)：遍历所有属性键名（所有）</li></ol> <ul><li>super关键字（es6提出类class的概念，super指向当前对象的原型对象）</li> <li>Null判断运算符（??，当左侧值为null或undefined时才返回右部值）</li> <li>Object.assign(target,obj1,obj2,.....)：将obj1，obj2等源对象的属性合并到目标对象上，并返回一个新的合并后的对象。合并时若有同名属性则直接按照顺序替换，处理数组时按照也照对象的标准按index替换</li> <li>__proto__、Object.create、Object.setPrototypeOf/getPrototypeOf：对象的原型对象，原型对象的创建（返回一个原型为参数对象的空对象），手动设置/获取对象的原型对象</li> <li>新的遍历方法（返回数组，只遍历可枚举属性）：Object.keys()/values()/entries()</li></ul> <h3 id="set、map"><a href="#set、map" class="header-anchor">#</a> Set、Map</h3> <ul><li><p>Set</p> <ul><li><p>类似于数组，但成员值唯一，不存在重复</p></li> <li><p>创建函数Set()可以接受一个数组作为参数完成初始化</p></li> <li><p>在Set内部两个NaN会去重，两个相同的对象不会</p></li> <li><p>实例属性：</p> <p>size：Set内部成员总数</p></li> <li><p>实例方法：</p> <ol><li>add(value)：添加某个值，返回添加过的Set结构本身（因此支持链式调用）；</li> <li>delete (value)：删除某个值，返回布尔值表示是否成功删除；</li> <li>has(value)：判断是否存在某个值，返回一个布尔值；</li> <li>clear()：清除所有内部成员；</li></ol></li> <li><p>遍历操作：</p> <ol><li>Set.keys()：返回键名遍历器，由于Set并不存在键名，所以返回的是键值；</li> <li>Set.values()：返回键值遍历器；</li> <li>Set.entries()：返回键值对的遍历器；</li> <li>Set.forEach((val,key,set) =&gt; {...})：使用回调函数遍历每个Set的成员。</li></ol></li> <li><p>由于Set结构具有iterator接口，因此可以直接用for..of遍历，遍历器默认函数为values</p></li> <li><p>可以结合扩展运算符转化成数组</p></li></ul></li> <li><p>WeakSet</p> <p>类似于Set，但成员值只能是对象，但不可遍历，且内部对象都是弱引用</p></li> <li><p>Map</p> <ul><li>键值对的集合，结构上类似于对象，但其键类型并不仅限于字符串，而是支持任意类型。从这一点看，Map结构提供了“值-值”的对应关系；</li> <li><strong>任何具有iterator接口，且每个成员都是双元素的数组的数据结构</strong>都能成为Map构造函数的参数（因此单纯的对象无法成为参数）；</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">[</span>
	<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">,</span><span class="token string">'liao'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">[</span><span class="token string">'age'</span><span class="token punctuation">,</span><span class="token number">17</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">[</span><span class="token string">'hobby'</span><span class="token punctuation">,</span><span class="token string">'read'</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span>
</code></pre></div><ul><li><p>具有实例方法set(key,value)、get(key)、has(key)、size属性、delete(key)、clear()，分别可以设置指定键的值，依据键获取值，判断是否存在某个键，获取Map实例长度，根据键名删除键值对，清除Map结构中的所有键值对；</p> <p><strong>和Set相同，可以参考</strong></p></li> <li><p>set方法对已存在的键名会更新值，不存在的键会定义；get方法对不存在的键返回undefined；</p></li> <li><p>不推荐以对象作为键，因为引用类型数据就算值相同，但地址不同，我们只能获取到地址；</p></li> <li><p>遍历：map.keys()/values()/entries()/forEach((val,key,map) =&gt; {...})，分别返回键名遍历器，值遍历器，键值对遍历器，回调函数遍历处理Map成员</p></li> <li><p>由于Map结构具有iterator接口，因此可以直接用for..of遍历，遍历器默认函数为map.entries()</p></li> <li><p>可以结合扩展运算符转化成数组</p></li></ul></li> <li><p>WeakMap</p> <p>和WeakSet类似，键值只能是对象，键名是正常值，但键名采取弱引用，目的是为了防止内存泄露</p> <p>典型应用场景：DOM节点作为键名，键值保存节点信息</p></li></ul> <h3 id="proxy"><a href="#proxy" class="header-anchor">#</a> Proxy</h3> <ul><li>从效果上描述类似于对象拦截器，实际上更像是对象的代理，能够读取对象的属性和方法，并依据需求设置效果</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
	name<span class="token operator">:</span><span class="token string">'joker'</span><span class="token punctuation">,</span>
	age<span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">,</span>
	<span class="token function-variable function">run</span><span class="token operator">:</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">' run!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//构造函数Proxy(target,handler)，target代表目标对象，handler是一个对象，属性为各种拦截操作</span>
<span class="token keyword">let</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> propKey<span class="token punctuation">,</span>receiver</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'get '</span> <span class="token operator">+</span> propKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// joker</span>
proxy<span class="token punctuation">.</span>age	<span class="token comment">// get age</span>
</code></pre></div><ul><li><p>拦截的操作：</p> <ol><li><p><code>get(target,propKey,receiver){ ... }</code></p> <p>get用于<strong>拦截对象属性读操作</strong>，参数依次为目标对象，属性名，操作行为实际针对的对象</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token keyword">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> propKey<span class="token punctuation">,</span>receiver<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'get '</span> <span class="token operator">+</span> propKey<span class="token punctuation">,</span>receiver<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> receiver<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>prop<span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token punctuation">{</span>
  	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>prop<span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>proxy<span class="token punctuation">.</span>name <span class="token operator">===</span> proxy<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// true</span>
</code></pre></div></li> <li><p><code>set(target,propKey,value,receiver){ ... }</code></p> <p>set用于<strong>拦截对象属性写操作</strong>，参数依次是目标对象，属性名，传入的属性值，操作行为实际针对的对象</p></li> <li><p><code>apply (target,ctx,args){ ... }</code></p> <p>拦截<strong>函数调用、call和apply操作</strong>，参数依次是目标对象，目标对象上下文（this）和目标对象的参数数组</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'this is target!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> applyPro <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span><span class="token punctuation">{</span>
	<span class="token function">apply</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span>ctx<span class="token punctuation">,</span>args</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">let</span> sum <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>args<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">pre<span class="token punctuation">,</span>cur</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> pre <span class="token operator">+</span> cur<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">applyPro</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// 6</span>
<span class="token function">applyPro</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// 6</span>
<span class="token function">applyPro</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// 6</span>
</code></pre></div></li> <li><p><code>has(target,key){ ... }</code></p> <p>拦截<code>HasProperty</code>操作（不只针对<code>hasOwnPropertyNames</code>），即判断对象是否具有某个属性时，这个方法会生效。典型的操作就是<code>in</code>运算符。has无法拦截for..in遍历</p></li> <li><p><code>construct(target,args,newTarget){ ... }</code></p> <p>拦截new命令，参数依次为目标对象，构造函数的参数对象，构造实例对象时new作用的构造函数</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//	Fnp为new作用的构造函数</span>
<span class="token keyword">let</span> Fnp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
	<span class="token function">construct</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span>args<span class="token punctuation">,</span>newTarget</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>args<span class="token punctuation">,</span>newTarget<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span><span class="token punctuation">{</span>	<span class="token comment">// 必须返回一个对象，否则会报错</span>
			name<span class="token operator">:</span><span class="token string">'liao'</span><span class="token punctuation">,</span>
			age<span class="token operator">:</span>args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> fnp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Fnp</span><span class="token punctuation">(</span><span class="token number">17</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fnp<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//	ƒ(){} [17]  Proxy </span>
<span class="token comment">//	{ name: 'liao', age: 17 }</span>
</code></pre></div></li> <li><p><code>deleteProperty(target,key){ ... }</code></p> <p>拦截delete命令，如果方法抛出错误或返回false，当前属性则无法被删除</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
	name<span class="token operator">:</span><span class="token string">'joker'</span><span class="token punctuation">,</span>
	age<span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">,</span>
	<span class="token function-variable function">run</span><span class="token operator">:</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">' run!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function">deleteProperty</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span>key</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
      	<span class="token comment">// 删除name键</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>key <span class="token operator">===</span> <span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">delete</span> target<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">delete</span> proxy<span class="token punctuation">.</span>name<span class="token punctuation">;</span>	<span class="token comment">// { name: 'joker', age: 18, run: [Function: run] } name</span>
<span class="token keyword">delete</span> proxy<span class="token punctuation">.</span>age<span class="token punctuation">;</span>	<span class="token comment">// { age: 18, run: [Function: run] } age</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>proxy<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// { age: 18, run: [Function: run] }</span>
</code></pre></div></li> <li><p><code>definePropety(target,key,descriptor)</code></p> <p>拦截<code>object.defineProperty</code>方法，但由于set/get级别高于defineProperty，因此感觉实际意义不是很大</p></li> <li><p><code>getOwnPropertyDescriptor(target,key)</code></p> <p>拦截<code>Object.getOwnPropertyDescriptor</code>方法，返回一个属性描述对象或undefined</p></li> <li><p><code>getPrototypeOf()</code></p> <p>拦截获取对象原型，具体拦截这些操作：<code>Object.prototype.__proto__</code>、<code>Object.prototype.isPrototypeOf()</code>、<code>Object.getPrototypeOf()</code>、<code>Reflect.getPrototypeOf()</code>、<code>instanceof</code></p> <p>返回值必须是对象或者null，否则报错</p></li> <li><p><code>isExtensible(target)</code></p> <p>拦截<code>Object.isExtensible</code>方法。<code>Object.isExtensible(obj)</code>用于判断对象是否可扩展（是否能增添新属性）。</p> <p>方法只能返回布尔值</p></li> <li><p><code>ownKeys(target)</code></p> <p>​	拦截对象自身属的性读取操作，具体包括：<code>Object.getOwnPropertyNames()</code>、<code>Object.getOwnPropertySymbols</code>、<code>Object.keys()</code>、<code>for..in</code></p> <p>​	当使用<code>Object.keys()</code>遍历读取对象属性时，目标对象上不存在的属性、属性名为Symbol值、enmerable值为fasle的属性会被自动过滤：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
	a<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>
	name<span class="token operator">:</span><span class="token string">'joker'</span><span class="token punctuation">,</span>
	age<span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">,</span>
	<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">'liao'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">:</span><span class="token string">'liao'</span><span class="token punctuation">,</span>	<span class="token comment">// Symbol值键名</span>
	<span class="token function-variable function">run</span><span class="token operator">:</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">' run!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span><span class="token string">'demo'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
	value<span class="token operator">:</span><span class="token string">'demo_text'</span><span class="token punctuation">,</span>
	enumerable<span class="token operator">:</span><span class="token boolean">false</span>	<span class="token comment">//demo不可枚举</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span> <span class="token punctuation">{</span>
	<span class="token function">ownKeys</span><span class="token punctuation">(</span><span class="token parameter">target</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">,</span>Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">'liao'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'run'</span><span class="token punctuation">,</span><span class="token string">'demo'</span><span class="token punctuation">]</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>proxy<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//[ 'a', 'run' ]</span>
</code></pre></div><p>​	<code>ownKeys</code>方法返回的数组成员，只能是字符串或 Symbol 值。如果有其他类型的值，或者返回的根本不是数组，就会报错。</p> <p>​	不可配置（configurable为false）属性必须被返回</p> <p>​	如果目标对象不可扩展，此时<code>ownKey</code>方法返回的数组必须包括目标对象所有的属性，且不能包含多余属性</p></li> <li><p><code>preventExtensions(target)</code></p> <p>拦截<code>Object.preventExtensions()</code>，方法必须返回一个布尔值。</p> <p>唯一要注意的是，只有目标对象不可扩展(Object.isExtensible(proxy)为false)时，<code>preventExtensions(target)</code>才能返回true，否则报错。因此通常会预先调用一次<code>Object.preventExtensions(target)</code></p></li> <li><p><code>setPrototypeOf(target,proto)</code></p> <p>拦截<code>Object.setPrototypeOf</code>方法，且只能返回布尔值</p></li></ol></li> <li><p><code>Proxy.revocable(target,handler)</code></p> <p><code>Proxy.revocable</code>方法返回一个对象，该对象的<code>proxy</code>属性是<code>Proxy</code>实例，<code>revoke</code>属性是一个函数，可以取消<code>Proxy</code>实例。上面代码中，当执行<code>revoke</code>函数之后，再访问<code>Proxy</code>实例，就会抛出一个错误。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> target <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> handler <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> <span class="token punctuation">{</span>proxy<span class="token punctuation">,</span> revoke<span class="token punctuation">}</span> <span class="token operator">=</span> Proxy<span class="token punctuation">.</span><span class="token function">revocable</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>

proxy<span class="token punctuation">.</span>foo <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>proxy<span class="token punctuation">.</span>foo<span class="token punctuation">)</span> <span class="token comment">// 123</span>

<span class="token function">revoke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>proxy<span class="token punctuation">.</span>foo<span class="token punctuation">)</span> <span class="token comment">// TypeError: Revoked</span>
</code></pre></div><p><code>Proxy.revocable</code>的一个使用场景是，目标对象不允许直接访问，必须通过代理访问，一旦访问结束，就收回代理权，不允许再次访问。</p></li> <li><p>this指向问题</p> <p>​	proxy代理对象的访问，但不能<strong>全权代理</strong>，因此this会指向proxy对象。对此可以用bind直接绑定访问对象的上下文（this）。</p></li></ul> <h3 id="class"><a href="#class" class="header-anchor">#</a> Class</h3> <ul><li><p>ES5中，定义类时都是用function，但ES6提出了正式class类的概念，但其本质仍是相当于function的语法糖，因此定义的class仍具有prototype、proto等特性，且含义与ES5时期相同；</p></li> <li><p>Class的所有方法都是定义在<code>Class.prototype</code>上的，所以想添加新方法时可以直接用<code>Object.assign</code>把方法添加上去。另外，在class内部定义方法enumerable属性为false，实例中是无法获取到方法的，只能得到属性；</p></li> <li><p>constructor</p> <p>类默认构造方法，通过new命令生成对象时会自动调用该方法，构造对象并返回类的原型对象；</p></li> <li><p>setter/getter</p> <p>set/get访问器方法</p></li> <li><p>Generator方法</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Point</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y<span class="token punctuation">,</span>age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> x<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> y<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>arr <span class="token operator">=</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>age<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>showThis <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">showThis</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">set</span> <span class="token function">age</span><span class="token punctuation">(</span><span class="token parameter">age</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  	<span class="token keyword">this</span><span class="token punctuation">.</span>_age <span class="token operator">=</span> age<span class="token punctuation">;</span>
  	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'age is set!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">get</span> <span class="token function">age</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'age is get!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  	<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_age<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token operator">*</span><span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  	<span class="token keyword">yield</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">showThis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'('</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token string">', '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">+</span> <span class="token string">')'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">17</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> val <span class="token keyword">of</span> p1<span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>	
<span class="token comment">//	for..of会访问对象的iterator接口，遍历调用遍历器对象，最后返回对象的键数组</span>
</code></pre></div></li> <li><p>静态属性和方法</p> <p>内部定义方法时，在方法名前加上static关键字。</p> <p>定义静态属性时，直接以类名调用点方法定义即可。</p></li> <li><p>子类继承父类时，子类的<code>__proto__</code>代表继承，指向父类的构造函数，子类原型对象的<code>__proto__</code>也指向父类原型对象</p> <p>子类构造实例的<code>__proto__</code>指向子类原型，再上一级为父类</p></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/JavaScript/DOM.html" class="prev">DOM</a></span> <span class="next"><a href="/JavaScript/函数中按值传递的理解.html">函数中按值传递的理解</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.9b313d47.js" defer></script><script src="/assets/js/2.4bf212e8.js" defer></script><script src="/assets/js/11.33575be4.js" defer></script>
  </body>
</html>
